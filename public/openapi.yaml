openapi: 3.0.0
info:
  title: Project Module API
  version: 1.0.0
  description: API for project management module

servers:
  - url: http://localhost:4321

tags:
  - name: Projects

paths:
  /api/project:
    get:
      tags: [Projects]
      summary: Get a list of projects, admin can query by state
      parameters:
        - in: query
          name: state
          schema:
            $ref: "#/components/schemas/ProjectState"
      responses:
        "200":
          description: List of projects
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Project"

    post:
      tags: [Projects]
      summary: Create a new project
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectRequest"
      responses:
        "201":
          description: Project created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"

  /api/project/{projectId}:
    get:
      tags: [Projects]
      summary: Get project by ID
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Project found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"
        "404":
          description: Project not found

  /api/project/{projectId}/approve:
    post:
      tags: [Projects]
      summary: Approve completed project
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Project approved

  /api/project/{projectId}/reject:
    post:
      tags: [Projects]
      summary: Reject completed project
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Project rejected

  /api/project/{projectId}/close:
    post:
      tags: [Projects]
      summary: Close approved project
      parameters:
        - in: path
          name: projectId
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Project closed

components:
  schemas:
    Project:
      type: object
      properties:
        id:
          type: string
        customerId:
          type: string
        translatorId:
          type: string
          nullable: true
        languageCode:
          type: string
        state:
          $ref: "#/components/schemas/ProjectState"
        createdAt:
          type: string
          format: date-time

    CreateProjectRequest:
      type: object
      required: [languageCode]
      properties:
        languageCode:
          type: string
          example: "de"

    ProjectState:
      type: string
      enum:
        - CREATED
        - ASSIGNED
        - COMPLETED
        - APPROVED
        - CLOSED
